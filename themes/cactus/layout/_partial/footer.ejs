<footer id="footer">
  <% 
    var endYear = (theme && theme.copyright && theme.copyright.end_year) ? theme.copyright.end_year : new Date().getFullYear();
    var startYear = (theme && theme.copyright && theme.copyright.start_year) ? theme.copyright.start_year : new Date().getFullYear();
    var authorOrTitle = config.author || config.title;
  %>

  <style>
    #footer {
      border-top: 1px solid rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      background: transparent;
    }

    .footer-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .footer-left {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      min-width: 0;
    }

    .footer-left .site-title {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .footer-right nav { margin: 0; }
    .footer-right .footer-nav {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 0.75rem;
      align-items: center;
      flex-wrap: wrap;
    }
    .footer-right .footer-nav li { white-space: nowrap; }

    .footer-bottom {
      text-align: center;
      margin-top: 0.25rem;
    }
    .footer-bottom .copyright {
      font-size: 0.7rem;
      color: #908d8d;
    }

    /* Small screens: stack top row */
    @media (max-width: 640px) {
      .footer-top {
        flex-direction: column;
        align-items: center;
      }
      .footer-left,
      .footer-right {
        width: 100%;
        justify-content: center;
        text-align: center;
      }
      .footer-left { order: 1; }
      .footer-right { order: 2; margin-top: 0.25rem; }
    }
  </style>

  <hr style="width: 100%;">

  <div class="footer-top">
    <div class="footer-left">
      <% if (config.emailSubmit && page && page.path === 'index.html') { %>
        <div class="footer-email">
          <%- partial('_partial/email_submit'); %>
        </div>
      <% } %>
    </div>

    <% if (page && page.path !== "index.html") { %>
    <div class="footer-right">
      <nav aria-label="Footer navigation">
        <ul class="footer-nav">
          <% if (theme && theme.nav) { %>
            <% for (var i in theme.nav) { %>
              <li><a href="<%- url_for(theme.nav[i]) %>"><%= __('nav.'+i).replace("nav.", "") %></a></li>
            <% } %>
          <% } %>
        </ul>
      </nav>
    </div>
    <% } %>
  </div>

  <div class="footer-bottom" role="contentinfo">
    <small class="copyright">
      <%= __('footer.copyright') %> &copy;
      <% if (startYear && startYear !== endYear) { %>
        <%= startYear %>-<%= endYear %>
      <% } else { %>
        <%= endYear %>
      <% } %>
      <%= authorOrTitle %>
    </small>
  </div>
</footer>
